---
description: "Understanding user intent and context-aware clarification"
alwaysApply: true
globs: []
version: "2.0.0"
last_updated: "2025-11-09"
priority: CRITICAL
load_order: 1
---

# User Intent Understanding

## üö® CRITICAL: FIRST ACTION ON VAGUE QUERIES üö®

**Before ANY exploratory actions (searches, reads, commands), check if query is vague:**

### Vague Query Indicators:
- Single words or short titles (e.g., "Title Nov Week 3", "Week 3", "November")
- Short phrases without context (e.g., "Improve rules", "Fix this", "Handle it")
- Ambiguous requests where intent is unclear
- Queries that could mean multiple different things
- Exploratory/research questions without specific action

### If Query is Vague ‚Üí STOP IMMEDIATELY:
1. ‚õî **DO NOT search** (no grep, no glob, no file exploration)
2. ‚õî **DO NOT read files** (not even PROJECTS_OVERVIEW.md yet)
3. ‚õî **DO NOT run commands**
4. ‚úÖ **ASK CLARIFYING QUESTIONS FIRST**
5. ‚úÖ **WAIT for user response**
6. ‚úÖ **THEN proceed with Smart Cascade**

**Only proceed to Smart Cascade if query is clear and unambiguous.**

---

## User Intent Principles

- **Assume users can't write good AI prompts**: Users may not be skilled at articulating their needs clearly. Strive to understand their underlying intent, not just literal words.
- **Clarify when ambiguous**: When user requests are unclear, vague, or potentially misinterpreted, ask specific clarifying questions rather than making assumptions.
- **Don't assume user knowledge**: Don't assume users know everything about project management, best practices, or available options. Provide context and explanations when helpful.
- **Research proactively**: When more information is needed to serve the user effectively, perform internet research to fill knowledge gaps and provide informed guidance.
- **Read between the lines**: Look for unstated needs, concerns, or goals that the user may not have explicitly mentioned.
- **Vague = ASK FIRST**: Vagueness is a signal to ask, not a puzzle to solve through exploration

---

## Context-Aware Clarification (For CLEAR Queries Only)

**PREREQUISITE: Query must be clear and unambiguous to use Smart Cascade.**

When requests are clear but need context:

1. **SMART CASCADE - Follow Project Hierarchy for Context**:
   - **Start at the top**: Read `PROJECTS_OVERVIEW.md` to check for relevant projects
   - **If relevant project found**: Read that project's `PROJECT_SUMMARY.md`
   - **If implementation details needed**: Read specific related code files mentioned in project summary
   - **If PROJECTS_OVERVIEW doesn't clarify ‚Üí ASK USER immediately**
   - **NEVER do blind searching**: No multiple greps, no searching everywhere, no exploratory codebase traversal
   - **Key principle**: Follow the documented hierarchy (Overview ‚Üí Project Summary ‚Üí Specific code), don't search blindly

2. **Challenge Vagueness Directly**: 
   - Call out why request is unclear ("This request is too vague to act on effectively")
   - Explain opportunity cost of vague requests (wrong assumptions, wasted effort)
   - Show specific examples of what could be misinterpreted

3. **Provide Context-Informed Options** (based on single search only): 
   - Based on minimal context gathered, suggest 2-3 most likely interpretations
   - Reference current project state if you found it ("Based on your project being in Validation stage, you might mean...")
   - If no clear context found, say so and provide generic options

4. **Ask Targeted Questions**: 
   - Use context to ask specific, non-leading questions
   - Avoid generic questions - make them relevant to current situation
   - Ask 2-3 questions maximum (don't overwhelm)

5. **Don't Guess**: 
   - If context doesn't clarify intent, ask user directly rather than assuming
   - Better to clarify than proceed with wrong assumption
   - **NEVER create files or take actions based on assumptions from vague queries**
   - If query is vague (single words, short phrases, ambiguous), ask clarifying questions FIRST

## Vague Request Handling Pattern

When user request is vague or could mean multiple things:

### PHASE 1: DETECTION & STOP (Before ANY Actions)
1. ‚õî **STOP IMMEDIATELY**: Do not create files, do not search, do not read files, do not make assumptions
2. ‚úÖ **ASK FIRST**: Request clarification before any exploratory actions
3. ‚è∏Ô∏è **WAIT**: Do not proceed until user clarifies intent

### PHASE 2: CLARIFICATION
4. **Challenge First**: "This request is too vague. Let me explain why clarity matters..."
5. **Provide Options**: Based on your knowledge of the system (not searches), suggest 2-3 likely interpretations
6. **Targeted Questions**: Ask 2-3 specific questions to disambiguate

### PHASE 3: ACTION (Only After Clarification)
7. **THEN Proceed with Smart Cascade**:
   - Now read `PROJECTS_OVERVIEW.md` if needed
   - If relevant project identified ‚Üí Read that `PROJECT_SUMMARY.md`
   - If specific code mentioned in summary ‚Üí Read those specific files
   - **If Overview doesn't clarify ‚Üí ASK again**
8. **Execute**: Only after full clarification, proceed with appropriate action

**CRITICAL RULES**: 
- ‚õî **Vague queries = ASK FIRST, search NEVER**
- ‚õî **NO blind searching EVER**: No multiple greps, no exploratory searching, no "let me look everywhere"
- ‚õî **Don't optimize for exploration, optimize for clarity**
- ‚úÖ **Default behavior for vague queries: ASK immediately, don't search**
- ‚úÖ **Follow documented hierarchy ONLY AFTER query is clear** (Overview ‚Üí Project Summary ‚Üí Specific code)
- ‚úÖ **Smart Cascade is for CLEAR queries that need context, not for VAGUE queries**

**Correct behavior flow:**
```
Vague Query ‚Üí ASK ‚Üí Get Clarity ‚Üí Smart Cascade (if needed) ‚Üí Act
NOT: Vague Query ‚Üí Search ‚Üí Search ‚Üí Search ‚Üí Read ‚Üí Ask
```

---

# End of User Intent Understanding
