---
description: "Vague Query Detection - Pattern matching and response protocol"
alwaysApply: true
globs: []
version: "1.0.0"
last_updated: "2025-11-09"
priority: CRITICAL
load_order: 0
---

# Vague Query Detector

**Purpose**: Explicitly identify vague queries and enforce the ASK-FIRST pattern before any exploratory actions.

**Load Order**: This rule has `load_order: 0` - it should be the FIRST rule consulted when receiving a user query.

---

## üö® VAGUE QUERY DETECTION PATTERNS üö®

### Pattern Categories

#### 1. Single Words or Short Titles
**Pattern**: Query is ‚â§3 words, no clear action verb

**Examples**:
- ‚ùå "Nov Week 3"
- ‚ùå "Title Nov Week 3"
- ‚ùå "Week 3"
- ‚ùå "November"
- ‚ùå "Project management"
- ‚ùå "Rules"

**Response**: STOP ‚Üí ASK ‚Üí WAIT

---

#### 2. Ambiguous Short Phrases
**Pattern**: Short phrase without sufficient context, could mean multiple things

**Examples**:
- ‚ùå "Improve rules"
- ‚ùå "Fix this"
- ‚ùå "Handle it"
- ‚ùå "Do the thing"
- ‚ùå "Update system"
- ‚ùå "Check status"

**Response**: STOP ‚Üí ASK ‚Üí WAIT

---

#### 3. Exploratory/Open-Ended Questions
**Pattern**: Research-oriented questions without specific action or deliverable

**Examples**:
- ‚ùå "What is...?"
- ‚ùå "Tell me about..."
- ‚ùå "How does...?"
- ‚ùå "Explain..."
- ‚ö†Ô∏è "What should I do?" (borderline - may need clarification)

**Response**: Usually respond in chat, but check if user expects file creation

---

#### 4. Unclear Pronouns/References
**Pattern**: References to "this", "that", "it" without clear antecedent

**Examples**:
- ‚ùå "Update this"
- ‚ùå "Fix that bug"
- ‚ùå "Process it"
- ‚ùå "Handle these"

**Response**: STOP ‚Üí ASK ‚Üí WAIT

---

#### 5. Context-Dependent Phrases
**Pattern**: Phrases that heavily depend on unstated context

**Examples**:
- ‚ùå "Based on the projects overview, what..."
- ‚ùå "According to..."
- ‚ùå "Looking at the system..."
- ‚ö†Ô∏è These may be clear if followed by specific question

**Response**: Evaluate if query is sufficiently specific; if not ‚Üí ASK

---

## üõë MANDATORY RESPONSE PROTOCOL üõë

### When Vague Query Detected:

**Step 1: STOP IMMEDIATELY**
```
‚õî Do NOT search
‚õî Do NOT read files
‚õî Do NOT run commands
‚õî Do NOT make assumptions
‚õî Do NOT try to "figure it out" through exploration
```

**Step 2: ASK FOR CLARIFICATION**

Use this template:

```markdown
## Why This Request Needs Clarification

"[Quote user query]" is too vague to act on effectively. [Explain why - what's ambiguous about it]

## Possible Interpretations

Based on [your system knowledge OR context from previous conversation], you might mean:

1. **[Interpretation 1]** - [Brief description]
2. **[Interpretation 2]** - [Brief description]
3. **[Interpretation 3]** - [Brief description]

## Clarifying Questions

1. [Specific question 1]
2. [Specific question 2]

Please clarify what you'd like me to help with, and I'll get started right away.
```

**Step 3: WAIT**
- Do NOT proceed until user responds
- Do NOT "prepare" by reading files
- Do NOT make assumptions about which interpretation is correct

**Step 4: AFTER CLARIFICATION ‚Üí Proceed Normally**
- Now you can use Smart Cascade (if context needed)
- Read PROJECTS_OVERVIEW.md if relevant
- Take appropriate action based on clarified intent

---

## ‚úÖ CLEAR QUERY PATTERNS (Proceed Normally)

### What Makes a Query Clear:

1. **Specific Action Verb**
   - ‚úÖ "Create a LinkedIn post for November Week 3"
   - ‚úÖ "Update PROJECT_SUMMARY.md with the blocker"
   - ‚úÖ "List all active projects"

2. **Clear Subject + Action**
   - ‚úÖ "Review the R&D Grant submission timeline"
   - ‚úÖ "Show me the ClinicPro marketing plan"
   - ‚úÖ "What are the next action items for Medtech integration?"

3. **Sufficient Context in Query**
   - ‚úÖ "Based on PROJECTS_OVERVIEW.md, what is my most important priority today?"
   - ‚úÖ "I finished the auth system for ClinicPro - update the project"

4. **Explicit File Reference**
   - ‚úÖ "Read the PROJECT_SUMMARY for R&D Grant"
   - ‚úÖ "Update the PROJECTS_OVERVIEW with new milestone"

### For Clear Queries:
- Proceed with normal workflow
- Use Smart Cascade if context needed
- Follow standard operating procedures

---

## üéØ DECISION TREE

```
User Query Received
    ‚Üì
Is query ‚â§3 words?
    YES ‚Üí VAGUE ‚Üí ASK
    NO ‚Üí Continue
        ‚Üì
Does query have clear action verb?
    NO ‚Üí VAGUE ‚Üí ASK
    YES ‚Üí Continue
        ‚Üì
Is subject/object clear?
    NO ‚Üí VAGUE ‚Üí ASK
    YES ‚Üí CLEAR QUERY ‚Üí Proceed
```

---

## üìä VAGUE vs CLEAR EXAMPLES

| Vague Query | Why Vague | Clear Alternative |
|-------------|-----------|-------------------|
| "Nov Week 3" | No action, unclear intent | "Create action plan for November Week 3" |
| "Update system" | Which system? How? | "Update PROJECTS_OVERVIEW.md with milestone" |
| "Fix this" | What is 'this'? | "Fix the vague query handling in user-intent-understanding.mdc" |
| "Handle it" | What is 'it'? | "Process the Medtech integration blocker" |
| "Check status" | Status of what? | "Check status of R&D Grant submission" |
| "What should I do?" | Depends heavily on context | "Based on my projects, what is the highest priority task today?" |

---

## üîß INTEGRATION WITH OTHER RULES

This rule works as the FIRST checkpoint:

```
Vague Query Detector (load_order: 0)
    ‚Üì If VAGUE ‚Üí ASK, STOP
    ‚Üì If CLEAR ‚Üí Continue
    ‚Üì
User Intent Understanding (load_order: 1)
    ‚Üì Smart Cascade for context
    ‚Üì
Current Task (load_order: 2)
    ‚Üì Session workflow
    ‚Üì
Other Rules
```

---

## üéì LEARNING EXAMPLES

### ‚ùå BAD: What NOT To Do

**User**: "Nov Week 3"

**Wrong AI Response**:
```
Let me check your projects...
[Searches files]
[Reads PROJECTS_OVERVIEW]
[Reads PROJECT_SUMMARY]
[Makes assumption]
"I see you have several items scheduled. Let me create an action plan..."
[Creates file]
```

**Why Wrong**: 
- Searched before asking
- Made assumptions
- Created file without clarification

---

### ‚úÖ GOOD: Correct Response

**User**: "Nov Week 3"

**Correct AI Response**:
```
## Why This Request Needs Clarification

"Nov Week 3" is too vague to act on effectively. This could mean multiple different things, and proceeding without clarification risks wasting your time on the wrong work.

## Possible Interpretations

Based on your project management system, you might mean:

1. **Create action plan** - Generate a detailed task breakdown for November Week 3
2. **Review schedule** - Show what's scheduled for this week
3. **Update status** - Update project summaries with Week 3 progress
4. **Something else** - A different aspect of November Week 3 planning

## Clarifying Questions

1. What specific outcome do you want? (e.g., "Create action plan", "Show schedule")
2. Which project(s) are you focusing on?

Please clarify what you'd like me to help with regarding November Week 3.
```

**Why Right**:
- Stopped immediately
- Asked before searching
- Provided clear options
- Waited for clarification

---

## üìà SUCCESS METRICS

**System is working when**:
- Vague queries get clarification requests immediately
- No exploratory searching before clarification
- User confirms AI understood intent before action
- Fewer "that's not what I meant" corrections

**System needs tuning when**:
- AI still searches/reads before asking on vague queries
- AI creates files from ambiguous requests
- User frequently corrects misunderstandings
- Multiple rounds of clarification needed (questions weren't specific enough)

---

## üö® ENFORCEMENT PRIORITY

This is a **CRITICAL** rule with **load_order: 0**.

**Violation examples that MUST be caught**:
- Any search/read/command BEFORE asking on vague query
- File creation from ambiguous request
- Making assumptions about vague queries
- "Let me explore to understand" pattern on vague queries

**Expected behavior**:
- First action on vague query = Ask clarifying questions
- Zero exploratory actions before clarification
- User confirms understanding before proceeding

---

# End of Vague Query Detector
